## -*- mode: makefile -*-

bin_PROGRAMS += scorep

scorep_SOURCES = \
    $(SRC_ROOT)src/tools/instrumenter/scorep.cpp                           \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter.cpp              \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter.hpp              \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_utils.cpp        \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_utils.hpp        \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_cmd_line.cpp     \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_cmd_line.hpp     \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_install_data.cpp \
    $(SRC_ROOT)src/tools/instrumenter/scorep_instrumenter_install_data.hpp

scorep_CPPFLAGS = $(AM_CPPFLAGS) $(OPENMP_CFLAGS) \
    -I$(INC_ROOT)src/tools/instrumenter \
    $(UTILS_CPPFLAGS) \
    -DBUILD_DIR=\"`pwd`\"

if HAVE_PDT
scorep_CPPFLAGS += -DHAVE_PDT=1
endif

scorep_LDFLAGS = $(OPENMP_CFLAGS)

scorep_LDADD = libutils.la

EXTRA_DIST += \
    $(SRC_ROOT)share/SCOREP_Pdt_Instrumentation.conf \
    $(SRC_ROOT)share/SCOREP_Cobi_Adapter.xml.in      \
    $(SRC_ROOT)share/SCOREP_Cobi_Filter.xml

if HAVE_COBI
BUILT_SOURCES += create-cobi-config-local
endif
