## -*- mode: makefile -*-

##
## This file is part of the Score-P software (http://www.score-p.org)
##
## Copyright (c) 2009-2013,
## RWTH Aachen University, Germany
##
## Copyright (c) 2009-2013,
## Gesellschaft fuer numerische Simulation mbH Braunschweig, Germany
##
## Copyright (c) 2009-2013,
## Technische Universitaet Dresden, Germany
##
## Copyright (c) 2009-2013,
## University of Oregon, Eugene, USA
##
## Copyright (c) 2009-2013,
## Forschungszentrum Juelich GmbH, Germany
##
## Copyright (c) 2009-2013,
## German Research School for Simulation Sciences GmbH, Juelich/Aachen, Germany
##
## Copyright (c) 2009-2013,
## Technische Universitaet Muenchen, Germany
##
## This software may be modified and distributed under the terms of
## a BSD-style license.  See the COPYING file in the package base
## directory for details.
##

## file src/measurement/Makefile.cube_writer.inc.am

if ! HAVE_SCOREP_EXTERNAL_CUBE_WRITER

# Get dependencies right: @CUBE_WRITER_LIBS@ in common_libadd is known
# only at configure time. automake therefore can't create dependencies
# at bootstrap time (which it does for hardcoded .la files). Ensure
# libscorep_cube_writer.la is build in the beginning.
BUILT_SOURCES += libscorep_cube_writer.la

noinst_LTLIBRARIES += libscorep_cube_writer.la
libscorep_cube_writer_la_SOURCES =                                      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cartesian.c            \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cartesian.h            \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cnode.c                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cnode.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_compat_platform.c      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_compat_platform.h      \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cube.c                 \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cube.h                 \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cubew.c                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_cubew.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_direct_writing.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_embedded.h \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_hybrid.h   \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location.c             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location.h             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location_group.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_location_group.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_meta_data_writer.c     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_meta_data_writer.h     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_metric.c               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_metric.h               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_region.c               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_region.h               \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts.h       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_report_layouts_types.h \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_services.c             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_services.h             \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_system_tree_node.c     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_system_tree_node.h     \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_tar_writing.h          \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_types.h                \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_vector.h
libscorep_cube_writer_la_CPPFLAGS = \
    $(AM_CPPFLAGS) \
    -U_FORTIFY_SOURCE \
    -DCUBE_AS_SVN_EXTERNAL

endif # HAVE_SCOREP_EXTERNAL_CUBE_WRITER

# These .c files are included in one of the above SOURCES and
# therefore need to in the distribution.
EXTRA_DIST += \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_direct_writing.c       \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_embedded.c \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_file_layout_hybrid.c   \
    $(SRC_ROOT)src/measurement/cube_writer/cubew_tar_writing.c
